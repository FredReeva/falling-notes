/*! For license information please see main.9d4f8e3e.chunk.js.LICENSE.txt */
(this.webpackJsonpfalling=this.webpackJsonpfalling||[]).push([[0],{103:function(e,n,t){"use strict";t.r(n),t.d(n,"context",(function(){return M})),t.d(n,"busLeft",(function(){return N})),t.d(n,"busRight",(function(){return D}));var o=t(23),r=t(1),i=t(26),a=t(12),s=-3,c=120,l=new o.b(0,0),u=new o.b(0,0),d=new o.m(2);d.connect(l,0),d.connect(u,1);var h=new o.e(0,0,0);h.set({high:18,highFrequency:800,mid:3,midFrequency:300}),h.connect(d);var p=new o.d(-9,3);p.set({attack:.01,release:.05,knee:40});var m=new o.i(s);function g(e){for(var n=0;n<e.length-1;n+=1)e[n].connect(e[n+1]);e[e.length-1].connect(h),e[e.length-1].connect(p)}p.connect(m),m.connect(o.t());var b=[],f=[],j=[],x=[],v=[],y=[],O=0;var w=function(){var e=new o.l;e.set({volume:0,oscillator:{type:"fatsine",spread:20*Math.random()},envelope:{attack:.075,decay:6,sustain:.1,release:.1}});var n=new o.e(-3,0,0);return g([e,new o.p(10,.5).start(),n,new o.c(.1,7,.3).start()]),{synth:e}}(),S=function(){var e=new o.l;e.set({volume:-28,oscillator:{type:"pwm",modulationFrequency:.2,detune:14*Math.random()},envelope:{attack:.7,decay:2,sustain:.7,release:.9}});var n=new o.e(6,0,0),t=new o.q(20,.07),r=new o.g(1200,"lowpass",-24),i=new o.h(.2,600,1200);return i.connect(r.frequency),i.start(),g([e,t,r,n]),{synth:e}}(),k=function(){var e=new o.n({volume:-28,portamento:.01,oscillator:{type:"amsine"},envelope:{attack:.3,decay:2,sustain:.2,release:2},detune:.5});return g([e,new o.c(.5,10,.3),new o.k(1/8*(120/c),.4),new o.p(120/c*2,.4).start(),new o.g(300,"highpass")]),{synth:e,humanize:.2}}(),C=function(){var e=new o.n;e.set({harmonicity:8,modulationIndex:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:2,sustain:0,release:2},modulation:{type:"triangle"},modulationEnvelope:{attack:.05,decay:.2,sustain:0,release:.5},volume:-19});var n=new o.a(120/c*.25);return n.set({depth:1,type:"sawtooth1"}),n.start(),g([e,n,new o.f(1/3*(120/c),.25),new o.g(400,"highpass")]),{synth:e,humanize:.5}}();n.default=function(e){return Object(r.useEffect)((function(){c=e.parameters.tempo}),[e.parameters.tempo]),Object(r.useEffect)((function(){v.forEach((function(e){e.dispose(),v.pop(e)})),y=[],O=0;var n=0,t=1;"Piano"==e.parameters.chordSound?(t=1,x=w):"Pad"==e.parameters.chordSound&&(t=2,x=S),e.chords.forEach((function(e){var o={tonic:e.tonic,color:e.quality},r=Object(i.a)(o,4-t),a=Object(i.a)(o,4);a.push(r[0]),y.push({time:n,notes:a,duration:e.duration}),n+=parseInt(e.duration),O=n}));var r=function(e){if(y!=[]){var n=new o.j((function(n){y.forEach((function(t){e.synth.triggerAttackRelease(t.notes,parseInt(t.duration)*(120/c),n+t.time*(120/c),1)}))}),O*(120/c));return n.start(),n}}(x);v.push(r),f.forEach((function(e){e.dispose(),f.pop(e)})),j=[],e.melody.forEach((function(e){j.push(e)}));var a=0;"Synth"==e.parameters.melodySound?(b=k,a=0):"Bells"==e.parameters.melodySound&&(b=C,a=2);var s=function(e,n){if(j!=[]){var t=new o.j((function(t){j.forEach((function(o){if("note"==o.type){var r=o.pitch,i=440*Math.pow(2,(r-69+12*n)/12);e.synth.triggerAttackRelease(i,o.duration*(120/c),t+o.onsetTime*(120/c),1)}}))}),O*(120/c));return t.humanize=e.humanize,t.start(),t}}(b,a);f.push(s)}),[e.melody,e.parameters.melodySound,e.parameters.chordSound,e.parameters.tempo]),Object(a.jsx)(a.Fragment,{})};var M=o.s(),N=l,D=u},159:function(e,n,t){},26:function(e,n,t){"use strict";function o(e){for(var n=Math.floor(101*Math.random()+0),t=0,o=0;o<e.length;o++)if(n<=(t+=e[o][1]))return e[o][0]}function r(e){return e[Math.floor(Math.random()*e.length)]}function i(e){for(var n=[],t={C:0,"C#":1,D:2,"D#":3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,"A#":10,B:11,Db:1,Eb:3,Gb:6,Ab:8,Bb:10,"A##":11,"B##":1,"C##":2,"D##":4,"E##":6,"F##":7,"G##":9},o={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},r=0;r<e.length;r++)if("string"==typeof e[r])n.push(t[e[r]]);else{var i=Math.trunc(e[r]/12)+1;n.push(o[e[r]%12]+i)}return n}function a(e,n){for(var t=null,o=null,r=0;r<e.length;r++){var i=Math.abs(e[r]-n);(null==o||i<t)&&(o=e[r],t=i)}return o}function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t(162),r={"A##":"B","B##":"C#","C##":"D","D##":"E","E##":"F#","F##":"G","G##":"A"},i=o(e.color,e.tonic);if(null==i[0])throw"MelodyGen@Pitch Error: Chord ["+e.tonic+e.color+"] not recognized";for(var a=0;a<i.length;a++)i[a]in r&&(i[a]=r[i[a]]),null!=n&&(i[a]+=n.toString());return i}t.d(n,"d",(function(){return o})),t.d(n,"e",(function(){return r})),t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return s}))},298:function(e,n,t){"use strict";t.r(n);var o,r,i,a,s,c,l,u,d,h,p,m,g,b,f,j,x,v,y,O,w,S,k,C,M,N=t(1),D=t.n(N),P=t(30),T=t.n(P),E=(t(159),t(10)),A=t.n(E),I=t(16),z=t(11),F=t(20),U=t(19),L=t(17),B=t(18),H=Object(L.b)(o||(o=Object(B.a)(["\n  * {\n    margin:0;\n    padding: 0;\n    box-sizing: border-box;\n    \n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n        'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n        'Helvetica Neue', sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    \n    user-select: none;\n    border: none;\n    outline: none;\n\n  }\n\n  .Icon{\n    \n    margin-top:5px;\n    font-size: 200%;\n\n  }\n\n  .CloseBtn{\n    transition: 0.3s;  \n    justify-content: center;\n    align-items: center;\n    font-size: 200%;\n    \n    cursor: pointer;\n    outline: none;\n\n    color: rgba(255,0,0, 0.55);\n\n    &:hover {\n        transition: 0.5s;  \n        color: rgba(255,0,0, 0.9);\n    }\n  }\n\n  .pulsate {\n    animation: pulsate 4s ease-out;\n    -webkit-animation: pulsate 4s ease-out;\n    animation-iteration-count: infinite;\n    -webkit-animation-iteration-count: infinite; \n    \n}\n@-webkit-keyframes pulsate {\n    0% { \n        opacity: 0.3;\n    }\n    50% { \n        opacity: 1.0;\n    }\n    100% { \n        opacity: 0.3;\n    }\n}\n\n  h1 {\n      \n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n\n    font-size: 2em;\n    margin-top: 0;\n    margin-bottom: 0;\n    margin-left: 0;\n    margin-right: 0;\n    font-weight: bold;\n    \n  }\n\n  h2 {\n    \n    display: block;\n    font-size: 1.4em;\n    margin-top: 0;\n    margin-bottom: 0;\n    margin-left: 0;\n    margin-right: 0;\n    font-weight: bold;\n    \n  }\n\n  h3 {\n    margin: 0;\n    position: absolute;\n    display: block;\n    font-size: 1em;\n    font-weight: bold;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n\n  }\n\n  h4{\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    font-size: 1.1em;\n  }\n\ninput{\n  justify-content: center;\n  align-items: center;\n  //font-size: 1em;\n  height: 30px;\n  width: fit-content;\n  min-width: 50px;\n  border-radius: 10px;\n  margin-right: 5px;\n  margin-top: 7px;\n  padding: 7px;\n}\n\nform{\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\np{\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  font-size: 1.1em;\n}\n\n.Container{\n  position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.ColorButton{\n  text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white;\n}\n\n  "]))),q=t(323),R=t(322),G=t(152),J=t(321),W=t(31),X=t(144),K=t(26),Y=(t(114),t(12)),Z=Object(G.a)(),_=Object(G.a)({overrides:{MuiTooltip:{popper:{marginTop:"15px"},tooltip:{fontSize:"0.8em",fontWeight:"bold",color:"black",backgroundColor:"rgba(255, 255, 255, 0.85)",borderStyle:"none"},arrow:{color:"rgba(255, 255, 255, 0.85)",borderStyle:"none"}}}}),Q=L.d.div(r||(r=Object(B.a)(["\n    display: flex;\n\n    align-items: center;\n    width: fit-content;\n\n    background: ",";\n    box-shadow: 0 8px 32px 0 rgba(75, 75, 75, 0.4);\n\n    backdrop-filter: blur(8.5px);\n    -webkit-backdrop-filter: blur(8.5px);\n\n    border-radius: 15px;\n    border: ",";\n\n    margin: 1%;\n    padding: 0.2%;\n"])),(function(e){return e.theme.panelColor}),(function(e){return e.theme.border})),V=L.d.button(i||(i=Object(B.a)(["\n    transition: 0.5s;\n    width: 50px;\n    height: 50px;\n    border: ",";\n    border-radius: 25%;\n\n    background: ",";\n\n    margin: 5px;\n    cursor: pointer;\n\n    &:hover {\n        transition: 1s;\n        width: 60px;\n        height: 60px;\n        box-shadow: 0 8px 32px -5px rgba(75, 75, 75, 0.4);\n    }\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.buttonColor})),$=function(e){return Object(Y.jsx)(J.a,{theme:Z,children:Object(Y.jsxs)(Q,{className:e.className,children:[Object(Y.jsx)(J.a,{theme:_,children:Object(Y.jsx)(q.a,{TransitionComponent:R.a,TransitionProps:{timeout:600},placement:"bottom",enterDelay:200,title:"Song Selection",arrow:!0,children:Object(Y.jsx)(V,{onClick:function(){e.toggleMenu(0),e.stopContext()},children:Object(Y.jsx)(W.k,{className:"Icon"})})})}),Object(Y.jsx)(J.a,{theme:_,children:Object(Y.jsx)(q.a,{TransitionComponent:R.a,TransitionProps:{timeout:600},placement:"bottom",enterDelay:200,title:"Chords Lab",arrow:!0,children:Object(Y.jsx)(V,{onClick:function(){e.toggleMenu(1),e.stopContext()},children:Object(Y.jsx)(W.g,{className:"Icon"})})})}),Object(Y.jsx)(J.a,{theme:_,children:Object(Y.jsx)(q.a,{TransitionComponent:R.a,TransitionProps:{timeout:600},placement:"bottom",enterDelay:200,title:"Compute random melody",arrow:!0,children:Object(Y.jsx)(V,{onClick:function(){e.stopContext(),e.computeMelody()},style:{background:0===e.chords.length?"rgb(130,130,130)":null,pointerEvents:0===e.chords.length?"none":null},children:Object(Y.jsx)(W.d,{className:"Icon"})})})}),Object(Y.jsx)(J.a,{theme:_,children:Object(Y.jsx)(q.a,{TransitionComponent:R.a,TransitionProps:{timeout:600},placement:"bottom",enterDelay:200,title:"Style Lab",arrow:!0,children:Object(Y.jsx)(V,{onClick:function(){e.toggleMenu(2)},children:Object(Y.jsx)(W.c,{className:"Icon"})})})}),Object(Y.jsx)(J.a,{theme:_,children:Object(Y.jsx)(q.a,{TransitionComponent:R.a,TransitionProps:{timeout:600},placement:"bottom",enterDelay:200,title:"Parameters Lab",arrow:!0,children:Object(Y.jsx)(V,{onClick:function(){e.toggleMenu(3),e.stopContext()},style:{background:0===e.chords.length?"rgb(130,130,130)":null,pointerEvents:0===e.chords.length?"none":null},children:Object(Y.jsx)(X.a,{className:"Icon"})})})}),Object(Y.jsx)(J.a,{theme:_,children:Object(Y.jsx)(q.a,{TransitionComponent:R.a,TransitionProps:{timeout:600},placement:"bottom",enterDelay:200,title:"Download MIDI",arrow:!0,children:Object(Y.jsx)(V,{onClick:function(){!function(e,n,o,r){var i=t(114),a=new i.Track,s=new i.Track;a.setTempo(o),s.setTempo(o);var c=0;e.forEach((function(e){"pause"===e.type&&(c+=e.duration),"note"===e.type&&(c=["T"+128*c],a.addEvent([new i.NoteEvent({pitch:e.pitch,duration:4/e.duration,wait:c})],(function(e,n){return{sequential:!0}})),c=0)}));var l=[],u={tonic:"C",color:"Major"};n.forEach((function(e){l=[],u.tonic=e.tonic,u.color=e.quality,l=Object(K.a)(u,3);var n=4/e.duration;n===4/3&&(n="d2"),s.addEvent([new i.NoteEvent({pitch:l,duration:n})],(function(e,n){return{sequential:!1}}))}));var d=new i.Writer([a,s]),h=document.createElement("a");h.download=r,h.href=d.dataUri(),document.body.appendChild(h),h.click(),document.body.removeChild(h)}(e.melody,e.chords,e.tempo,e.songName)},style:{background:0===e.melody.length||0===e.chords.length?"rgb(130,130,130)":null,pointerEvents:0===e.melody.length||0===e.chords.length?"none":null},children:Object(Y.jsx)(W.e,{className:"Icon"})})})}),Object(Y.jsx)(J.a,{theme:_,children:Object(Y.jsx)(q.a,{TransitionComponent:R.a,TransitionProps:{timeout:600},placement:"bottom",enterDelay:200,title:"Start/Stop",arrow:!0,children:Object(Y.jsx)(V,{onClick:e.startStopContext,style:{background:0===e.melody.length||0===e.chords.length?"rgb(130,130,130)":null,pointerEvents:0===e.melody.length||0===e.chords.length?"none":null},children:e.isPlaying?Object(Y.jsx)(W.j,{className:"Icon"}):Object(Y.jsx)(W.h,{className:"Icon"})})})})]})})},ee=t(82),ne=L.d.div(a||(a=Object(B.a)(["\n    position: relative;\n    height: 100px;\n    display: flex;\n    flex-direction: row;\n    margin-top: 10px;\n    /* flex-wrap: wrap; */\n    justify-content: flex-start;\n    align-items: left;\n    overflow: auto;\n"]))),te=L.d.div(s||(s=Object(B.a)(["\n    width: fit-content;\n\n    background: ",";\n\n    border-radius: 15px;\n    border: ",";\n\n    margin: 5px;\n    position: relative;\n    height: 75px;\n    min-width: ","px;\n    box-shadow: none;\n    display: flex;\n    flex-direction: column;\n    overflow: visible;\n    padding: 10px;\n    cursor: grab;\n"])),(function(e){return e.theme.buttonColor}),(function(e){return e.theme.border}),(function(e){return 75*e.size})),oe=Object(L.d)(W.i)(c||(c=Object(B.a)(["\n    transition: 0.2s;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    color: rgba(150, 150, 150, 0.7);\n    cursor: pointer;\n\n    &:hover {\n        transition: 0.5s;\n        color: rgba(100, 100, 100, 1);\n    }\n"]))),re=function(e){return Object(Y.jsx)(ee.a,{onDragEnd:e.handleOnDragEnd,children:Object(Y.jsx)(ee.c,{droppableId:"chords",direction:"horizontal",children:function(n){return Object(Y.jsxs)(ne,Object(z.a)(Object(z.a)({className:"chords"},n.droppableProps),{},{ref:n.innerRef,children:[e.chords.length>0?e.chords.map((function(n,t){return Object(Y.jsx)(ee.b,{draggableId:n.id,index:t,children:function(t){return Object(Y.jsxs)(te,Object(z.a)(Object(z.a)(Object(z.a)({size:n.duration,ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:[Object(Y.jsxs)("h3",{children:[n.tonic,n.quality]}),Object(Y.jsx)(oe,{onClick:function(){e.onDelete(n.id)}})]}))}},n.id)})):Object(Y.jsx)("p",{style:{width:"auto",margin:"auto"},children:"Oops! Seems like you haven't added any chord yet... Please add a chord \ud83d\udc49\ud83c\udffc\u2795"}),n.placeholder]}))}})})},ie=L.d.div(l||(l=Object(B.a)(["\n    display: flex;\n    flex-direction: row;\n    /* flex-wrap: wrap; */\n\n    justify-content: space-evenly;\n\n    position: absolute;\n    top: 115px;\n\n    border: ",";\n    border-radius: 15px;\n\n    background: ",";\n    box-shadow: 0 8px 32px 0 rgba(75, 75, 75, 0.37);\n\n    margin: 5px;\n    padding: 5px;\n    cursor: initial;\n    ","\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.panelColor}),(function(e){return"circle"===e.keyboard&&Object(L.c)(u||(u=Object(B.a)(["\n            width: 165px;\n            height: 165px;\n        "])))})),ae=L.d.button(d||(d=Object(B.a)(["\n    transition: 0.2s;\n    height: 25px;\n    min-width: 25px;\n    padding: 2px;\n\n    border: ",";\n    border-radius: 25px;\n\n    background: ",";\n\n    margin: 5px;\n    cursor: pointer;\n\n    &:hover {\n        transition: 0.5s;\n        background: rgba(255, 255, 255, 0.8);\n    }\n\n    ","\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.buttonColor}),(function(e){return"circle"===e.keyboard&&Object(L.c)(h||(h=Object(B.a)(["\n            position: absolute;\n            ","\n            ","\n            ","\n            ","\n            ","\n            ","\n                \n            ","\n            ","\n            ","\n            ","\n            ","\n            ","\n        "])),(function(e){return"C"===e.element&&Object(L.c)(p||(p=Object(B.a)(["\n                    transform: translate(0, 0);\n                "])))}),(function(e){return"G"===e.element&&Object(L.c)(m||(m=Object(B.a)(["\n                    transform: translate(30px, 8px);\n                "])))}),(function(e){return"D"===e.element&&Object(L.c)(g||(g=Object(B.a)(["\n                    transform: translate(52px, 30px);\n                "])))}),(function(e){return"A"===e.element&&Object(L.c)(b||(b=Object(B.a)(["\n                    transform: translate(60px, 60px);\n                "])))}),(function(e){return"E"===e.element&&Object(L.c)(f||(f=Object(B.a)(["\n                    transform: translate(52px, 90px);\n                "])))}),(function(e){return"B"===e.element&&Object(L.c)(j||(j=Object(B.a)(["\n                    transform: translate(30px, 112px);\n                "])))}),(function(e){return"F#"===e.element&&Object(L.c)(x||(x=Object(B.a)(["\n                    transform: translate(0, 120px);\n                "])))}),(function(e){return"C#"===e.element&&Object(L.c)(v||(v=Object(B.a)(["\n                    transform: translate(-30px, 112px);\n                "])))}),(function(e){return"G#"===e.element&&Object(L.c)(y||(y=Object(B.a)(["\n                    transform: translate(-52px, 90px);\n                "])))}),(function(e){return"D#"===e.element&&Object(L.c)(O||(O=Object(B.a)(["\n                    transform: translate(-60px, 60px);\n                "])))}),(function(e){return"A#"===e.element&&Object(L.c)(w||(w=Object(B.a)(["\n                    transform: translate(-52px, 30px);\n                "])))}),(function(e){return"F"===e.element&&Object(L.c)(S||(S=Object(B.a)(["\n                    transform: translate(-30px, 8px);\n                "])))}))})),se=function(e){return Object(Y.jsx)(ie,{onClick:function(e){return e.stopPropagation()},keyboard:e.keyboard,children:e.elements.map((function(n,t){return Object(Y.jsx)(ae,{keyboard:e.keyboard,element:n,onClick:function(t){e.setElements(n)},children:n},t)}))})},ce=L.d.div(k||(k=Object(B.a)(["\n    position: relative;\n    display: flex;\n    min-width: 400px;\n    /* width: 75%; */\n    align-self: center;\n    align-items: center;\n    justify-content: space-around;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    border-radius: 15px;\n    border: ",";\n    height: 75px;\n    background: ",";\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.panelColor})),le=Object(L.d)(W.a)(C||(C=Object(B.a)(["\n    display: flex;\n    transition: 0.2s;\n    font-size: 400%;\n    opacity: 0.5;\n\n    margin: 5px;\n    cursor: pointer;\n\n    &:hover {\n        transition: 0.5s;\n        opacity: 1;\n    }\n"]))),ue=L.d.div(M||(M=Object(B.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: 0.2s;\n    min-width: 70px;\n    width: 20%;\n    height: 55px;\n    border: ",";\n    border-radius: 15px;\n    font-size: 1em;\n    background: ",";\n\n    margin-left: 10px;\n    cursor: pointer;\n    overflow: hidden;\n    transition: 0.5s;\n    &:hover {\n        background: rgba(255, 255, 255, 0.9);\n    }\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.buttonColor}));var de,he,pe,me,ge,be,fe=function(e){var n=Object(N.useState)(""),t=Object(U.a)(n,2),o=t[0],r=t[1],i=Object(N.useState)(""),a=Object(U.a)(i,2),s=a[0],c=a[1],l=Object(N.useState)(""),u=Object(U.a)(l,2),d=u[0],h=u[1],p=Object(N.useState)([!1,!1,!1]),m=Object(U.a)(p,2),g=m[0],b=m[1],f=function(e){var n=[!1,!1,!1],t=!g[e];n[e]=t,b(n)};return Object(Y.jsxs)(ce,{children:[Object(Y.jsxs)(ue,{onClick:function(){return f(0)},style:{background:g[0]?"rgba(255, 255, 255, 0.9)":null},children:[o||"Tonic",g[0]?Object(Y.jsx)(se,{keyboard:"circle",elements:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],setElements:function(e){r(e),f()}}):null]}),Object(Y.jsxs)(ue,{onClick:function(e){f(1)},style:{background:g[1]?"rgba(255, 255, 255, 0.9)":null},children:[s||"Quality",g[1]?Object(Y.jsx)(se,{elements:["Major","minor","Maj7","minor7","7","m7b5"],setElements:function(e){c(e),f()}}):null]}),Object(Y.jsxs)(ue,{onClick:function(){return f(3)},style:{background:g[3]?"rgba(255, 255, 255, 0.9)":null},children:[d||"Duration",g[3]?Object(Y.jsx)(se,{elements:["1","2","3","4"],setElements:function(e){h(e),f()}}):null]}),Object(Y.jsx)(le,{onClick:function(n){o&&s&&d&&(e.onAdd({tonic:o,quality:s,duration:d}),r(""),c(""),h(""),b([!1,!1,!1]))},style:{color:o&&s&&d?"rgb(255, 180, 0)":"rgb(210, 210, 210)",pointerEvents:o&&s&&d?null:"none"}})]})},je=L.d.div(de||(de=Object(B.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    backdrop-filter: blur(8.5px);\n    -webkit-backdrop-filter: blur(8.5px);\n"]))),xe=function(e){return Object(Y.jsx)(je,{onClick:e.onClick,children:e.children})},ve=L.d.div(he||(he=Object(B.a)(["\n    position: relative;\n    top: -3px;\n    align-items: center;\n"]))),ye=L.d.div(pe||(pe=Object(B.a)(["\n    position: relative;\n    top: -60px;\n    right: -20px;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n\n"]))),Oe=L.d.div(me||(me=Object(B.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n"]))),we=function(e){return Object(Y.jsxs)(ve,{children:[Object(Y.jsx)(Oe,{children:Object(Y.jsx)("h1",{children:e.titleMenu})}),Object(Y.jsx)(ye,{children:Object(Y.jsx)(W.b,{className:"CloseBtn",onClick:function(){e.toggleMenu()}})})]})},Se=L.d.div(ge||(ge=Object(B.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    position: relative;\n    min-width: 50vw;\n    max-width: 80vw;\n\n    overflow: visible;\n\n    background: ",";\n    box-shadow: 0 8px 32px 0 rgba(75, 75, 75, 0.37);\n\n    border-radius: 15px;\n    border: ",";\n    padding: 25px;\n"])),(function(e){return e.theme.panelColor}),(function(e){return e.theme.border})),ke=function(e){return Object(Y.jsx)(Se,{className:e.className,children:e.children})},Ce=function(e){var n=function(){e.toggleMenu(1),e.updateServer()};return e.showMenu?Object(Y.jsxs)("div",{className:"Container",children:[Object(Y.jsx)(xe,{onClick:n}),Object(Y.jsxs)(ke,{className:"ChordsMenu",children:[Object(Y.jsx)(we,{titleMenu:"Chords Lab",toggleMenu:n}),Object(Y.jsx)("p",{children:"\ud83c\udfb6 Insert, modify and delete the chords of the song"}),Object(Y.jsx)(re,{chords:e.chords,handleOnDragEnd:function(n){if(n.destination){var t=Array.from(e.chords),o=t.splice(n.source.index,1),r=Object(U.a)(o,1)[0];t.splice(n.destination.index,0,r),e.updateChords(t)}},onDelete:function(n){e.updateChords(e.chords.filter((function(e){return e.id!==n})))}}),Object(Y.jsx)(fe,{onAdd:function(n){var t=Date.now().toString(),o=Object(z.a)({id:t},n);e.updateChords([].concat(Object(F.a)(e.chords),[o]))}})]})]}):null},Me=t(23),Ne=t(25),De=L.d.div(be||(be=Object(B.a)(["\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n"])));function Pe(e){return new Promise((function(n){return setTimeout(n,e)}))}var Te=new Ne.d(Math.random(),Math.random(),Math.random()),Ee=(Te=(Te=Te.getHSL(Te)).setHSL(Te.h,.7,.5)).clone();Ee=Ee.getHSL(Ee);var Ae=0,Ie=new Ne.p;Ie.fog=new Ne.g("#000000",.01),Ie.background=new Ne.d("#000000");var ze=0;function Fe(e){var n=new Ne.c({autoStart:!1}),t=new Ne.b,o=new Float32Array(6),r=new Float32Array(6);o[0]=2*e*(Math.random()-.5),o[1]=e*Math.random(),o[2]=2*e*(Math.random()-.5),o[3]=o[0],o[4]=o[1],o[5]=o[2],r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,t.setAttribute("position",new Ne.a(o,3).setUsage(Ne.f)),t.setAttribute("velocity",new Ne.a(r,3).setUsage(Ne.f)),t.computeBoundingBox();var i=new Ne.i({color:Te});return[new Ne.h(t,i),n]}function Ue(e,n,t){var o=e.geometry.attributes.position.array,r=e.geometry.attributes.velocity.array;o[0]=4*t*(Math.random()-.5),o[1]=20+5*(Math.random()-.5),o[2]=-t*Math.random(),o[3]=o[0],o[4]=o[1],o[5]=o[2];var i=250*(Math.random()-.5),a=10*(Math.random()+.5),s=100*(Math.random()+.5),c=i-o[0],l=a-o[1],u=s-o[2];r[0]=.015*c,r[1]=.015*l,r[2]=.015*u,r[3]=.01*c,r[4]=.01*l,r[5]=.01*u,e.material.color=new Ne.d(Te),n.start()}function Le(e,n,t){var o=e.geometry.attributes.position.array,r=e.geometry.attributes.velocity.array,i=n.getElapsedTime()/2;i<.75&&(o[0]+=r[0],o[1]+=r[1],o[2]+=r[2]);var a=Te.clone(),s=Te.clone();s=(s=s.getHSL(s)).setHSL(s.h,1,0),a=a.lerp(s,i),e.material.color=a,o[3]+=r[3],o[4]+=r[4],o[5]+=r[5],i>1&&Ue(e,n,t)}var Be=t(103),He=Be.context,qe=He.createAnalyser(),Re=He.createAnalyser();qe.fftSize=256,qe.smoothingTimeConstant=.7,qe.minDecibels=-150,qe.maxDecibels=-10,Re.fftSize=256,Re.smoothingTimeConstant=.7,Re.minDecibels=-150,Re.maxDecibels=-10;var Ge=qe.frequencyBinCount;Me.r(Be.busLeft,qe),Me.r(Be.busRight,Re);var Je=function(e){var n=Object(N.useRef)(null);return Object(N.useEffect)((function(){var e=n.current.clientWidth,t=n.current.clientHeight,o=new Ne.l(100,e/t,1,2e4);o.position.set(0,5,-5);var r=new Ne.q(0,0,30);o.lookAt(r);var i=new Ne.r({alpha:!0});i.setSize(e,t),i.setPixelRatio(window.devicePixelRatio);var a=0,s=0,c=e/2,l=t/2;document.addEventListener("mousemove",(function(n){a=(n.clientX-c)/e*2,s=(n.clientY-l)/t*2}),!1);var u=2*Ge,d=function(e,n,t){for(var o=new Ne.b,r=n*t,i=new Float32Array(3*r),a=new Float32Array(3*r),s=0,c=0;c<n;c++)for(var l=0;l<t;l++){var u=l/t-.5,d=c/n-.5;i[3*s]=u,i[3*s+1]=0,i[3*s+2]=d;var h=.01;a[3*s]=e.r*h,a[3*s+1]=e.g*h,a[3*s+2]=e.b*h,s++}o.setAttribute("position",new Ne.a(i,3).setUsage(Ne.f)),o.setAttribute("color",new Ne.a(a,3).setUsage(Ne.f)),o.computeBoundingBox();var p=new Ne.o({size:.01,vertexColors:!0,transparent:!0});return new Ne.h(o,p)}(Te,50,u);d.scale.set(200,40,200),d.position.set(0,-10,100),Ie.add(d);var h=function(e,n){for(var t=new Ne.b,o=new Float32Array(3*e),r=new Float32Array(3*e),i=Te.clone(),a=0;a<e;a++){for(var s=2*(Math.random()-.5)*n,c=2*(Math.random()-.5)*n,l=2*(Math.random()-.5)*n,u=Math.sqrt(Math.pow(s,2)+Math.pow(c,2)+Math.pow(l,2));u>.2*n;)s=2*(Math.random()-.5)*n,c=2*(Math.random()-.5)*n,l=2*(Math.random()-.5)*n,u=Math.sqrt(Math.pow(s,2)+Math.pow(c,2)+Math.pow(l,2));o[3*a]=s,o[3*a+1]=c,o[3*a+2]=l,i=i.getHSL(i);var d=.01*(Math.random()-.5);(i.h+d<0||i.h+d>1)&&(d=-d),i=(i=(i=i.offsetHSL(d,.1*(Math.random()-.5),0)).getHSL(i)).setHSL(i.h,i.s,.5+.3*Math.random()),r[3*a]=i.r,r[3*a+1]=i.g,r[3*a+2]=i.b}t.setAttribute("position",new Ne.a(o,3).setUsage(Ne.f)),t.setAttribute("color",new Ne.a(r,3).setUsage(Ne.f)),t.computeBoundingBox();var h=new Ne.o({size:.2,vertexColors:!0});return new Ne.n(t,h)}(1500,300);Ie.add(h);var p=10,m=Fe(p),g=m[0],b=m[1],f=Fe(p),j=f[0],x=f[1],v=Fe(p),y=v[0],O=v[1],w=Fe(p),S=w[0],k=w[1],C=Fe(p),M=C[0],N=C[1],D=new Ne.m(2e3,2e3,8,8),P=new Ne.k({color:0,side:Ne.e}),T=new Ne.j(D,P);T.rotateX(-Math.PI/2),T.position.set(0,-8,0),Ie.add(T),n.current.appendChild(i.domElement),window.addEventListener("resize",(function(){e=n.current.clientWidth,t=n.current.clientHeight,i.setSize(e,t),o.aspect=e/t,o.updateProjectionMatrix()})),function e(){if(He.resume(),o.lookAt(r),function(e,n,t){var o=new Uint8Array(Ge),r=new Uint8Array(Ge),i=new Uint8Array(2*Ge);qe.getByteFrequencyData(o),Re.getByteFrequencyData(r),i.set(r.reverse()),i.set(o,r.length),function(e,n,t,o,r){for(var i=t*o,a=e.geometry.attributes.position.array,s=e.geometry.attributes.color.array,c=i,l=t;l>1;l--)for(var u=o;u>0;u--){var d=a[3*(c-o)+1];a[3*c+1]=d;var h=6*(d+.001);s[3*c]=n.r*h,s[3*c+1]=n.g*h,s[3*c+2]=n.b*h,c--}for(var p=0;p<o;p++){var m=r[p]/255;a[3*p+1]=m/3.5;var g=6*(a[3*p+1]+.001);s[3*p]=n.r*g,s[3*p+1]=n.g*g,s[3*p+2]=n.b*g}}(e,Te,n,t,i)}(d,50,u),1==ze)(function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.start(),Ie.add(g),e.next=4,Pe(500);case 4:return x.start(),Ie.add(j),e.next=8,Pe(500);case 8:return O.start(),Ie.add(y),e.next=12,Pe(500);case 12:return k.start(),Ie.add(S),e.next=16,Pe(500);case 16:N.start(),Ie.add(M);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),ze=0;else if(-1==ze){(function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(2600);case 2:Ie.remove(g),Ie.remove(j),Ie.remove(y),Ie.remove(S),Ie.remove(M),Ue(g,b,p),Ue(j,x,p),Ue(y,O,p),Ue(S,k,p),Ue(M,N,p);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),b.stop(),x.stop(),O.stop(),k.stop(),N.stop(),ze=0}else Le(g,b,p),Le(j,x,p),Le(y,O,p),Le(S,k,p),Le(M,N,p);1==Ae&&(!function(e,n,t){for(var o=t.geometry.attributes.position.array,r=t.geometry.attributes.color.array,i=Te.clone(),a=0;a<e;a++){for(var s=(Math.random()-.5)*n,c=(Math.random()-.5)*n,l=(Math.random()-.5)*n,u=Math.sqrt(Math.pow(s,2)+Math.pow(c,2)+Math.pow(l,2));n-u<200;)s=(Math.random()-.5)*n,c=(Math.random()-.5)*n,l=(Math.random()-.5)*n,u=Math.sqrt(Math.pow(s,2)+Math.pow(c,2)+Math.pow(l,2));o[3*a]=s,o[3*a+1]=c,o[3*a+2]=l,i=i.getHSL(i);var d=.05*(Math.random()-.5);(i.h+d<0||i.h+d>1)&&(d=-d),i=(i=(i=i.offsetHSL(d,.1*(Math.random()-.5),0)).getHSL(i)).setHSL(i.h,i.s,.5+.3*Math.random()),r[3*a]=i.r,r[3*a+1]=i.g,r[3*a+2]=i.b}}(1500,300,h),Ae=0),h.rotation.x=s>0?h.rotation.x-2e-4*s+1e-4:h.rotation.x-2e-4*s-1e-4,a>0?(h.rotation.y=h.rotation.y+2e-4*a+1e-4,h.rotation.z=h.rotation.z+2e-4*a+1e-4):(h.rotation.y=h.rotation.y+2e-4*a-1e-4,h.rotation.z=h.rotation.z+2e-4*a-1e-4),d.geometry.attributes.position.needsUpdate=!0,d.geometry.attributes.color.needsUpdate=!0,h.geometry.attributes.position.needsUpdate=!0,h.geometry.attributes.color.needsUpdate=!0,g.geometry.attributes.position.needsUpdate=!0,g.geometry.attributes.velocity.needsUpdate=!0,g.material.color.needsUpdate=!0,j.geometry.attributes.position.needsUpdate=!0,j.geometry.attributes.velocity.needsUpdate=!0,j.material.color.needsUpdate=!0,y.geometry.attributes.position.needsUpdate=!0,y.geometry.attributes.velocity.needsUpdate=!0,y.material.color.needsUpdate=!0,S.geometry.attributes.position.needsUpdate=!0,S.geometry.attributes.velocity.needsUpdate=!0,S.material.color.needsUpdate=!0,M.geometry.attributes.position.needsUpdate=!0,M.geometry.attributes.velocity.needsUpdate=!0,M.material.color.needsUpdate=!0,requestAnimationFrame(e),i.render(Ie,o)}()}),[]),Object(N.useEffect)((function(){Te=(Te=Te.getHSL(Te)).setHSL((e.color+.1)/360,.7,.5),Ae=1}),[e.color]),Object(N.useEffect)((function(){0==e.isPlaying?ze=-1:1==e.isPlaying&&(ze=1)}),[e.isPlaying]),Object(Y.jsx)(De,{className:e.className,ref:n})},We={dark:{background:"rgb(200, 100, 30)",panelColor:"rgba(255, 255, 255, 0.4)",buttonColor:"rgba(255, 255, 255, 0.6)",border:"2px solid rgba(220, 220, 220, 0.2)"},orange:{background:"rgb(200, 100, 30)",panelColor:"rgba(255, 255, 255, 0.4)",buttonColor:"rgba(255, 255, 255, 0.6)",border:"2px solid rgba(220, 220, 220, 0.2)"}},Xe=t(2),Ke=t(3),Ye=function(){return{pieceDuration:Number,segmentDuration:Number,pausePresence:Number,staticScaleAssociation:Boolean,segments:[{directionality:String,transform:{method:Object,vars:Object},chord:{tonic:String,color:String,notes:Array},diatonicScale:{name:String,tonality:Number,cromaticOffset:Number,notes:Array},objects:[{type:String,onsetTime:Number,duration:Number,pitch:Number}]}]}};function Ze(){var e=Ye();return e.segments=[],e}function _e(){var e=Ye().segments[0];return e.objects=[],e}function Qe(){return Ye().segments[0].objects[0]}function Ve(){var e=Ye().segments[0].chord;return e.notes=[],e}var $e=function(){function e(n,t){Object(Xe.a)(this,e),this.chords=t,this.piece=n}return Object(Ke.a)(e,[{key:"generate",value:function(){this.piece.pieceDuration=this.calcPieceDuration(),this.piece.segmentDuration=this.calcSegmentDuration();for(var e=this.piece.pieceDuration/this.piece.segmentDuration,n=0;n<e;n++)this.piece.segments.push(_e());return this.piece}},{key:"calcPieceDuration",value:function(){for(var e=0,n=0;n<this.chords.length;n++)e+=this.chords[n].duration;return e}},{key:"calcSegmentDuration",value:function(){var e=function e(n,t){return t?e(t,n%t):n},n=this.chords[0].duration;if(this.chords.length>1)for(var t=1;t<this.chords.length;t++)n=e(n,this.chords[t].duration);for(var o=[],r=1;r<=n;r++)n%r===0&&o.push(r);var i=Math.random()*o.length;return o[i=Math.floor(i)]}}]),e}(),en=function(){function e(n){Object(Xe.a)(this,e),this.piece=n}return Object(Ke.a)(e,[{key:"generate",value:function(){for(var e=[],n=0;n<this.piece.segments.length;n++){n%3===0&&(e=[]);for(var t=["+","-","0"].filter((function(n){return!e.includes(n)})),o=null;!t.includes(o);)o=0===n?K.d([["+",60],["-",20],["0",20]]):K.d([["+",1/3*100],["-",1/3*100],["0",1/3*100]]);2===e.length&&e.shift(),e.push(o),this.piece.segments[n].directionality=o}return this.piece}}]),e}(),nn={Major:["ionian","lydian","mixolydian"],minor:["dorian","phrygian","aeolian"],Maj7:["ionian","lydian"],minor7:["dorian","phrygian","aeolian"],7:["mixolydian"],m7b5:["locrian"]},tn={Major:["ionian"],minor:["aeolian"],Maj7:["ionian"],minor7:["aeolian"],7:["mixolydian"],m7b5:["locrian"]},on={ionian:0,dorian:1,phrygian:2,lydian:3,mixolydian:4,aeolian:5,locrian:6},rn={ionian:[2,2,1,2,2,2,1],dorian:[2,1,2,2,2,1,2],phrygian:[1,2,2,2,1,2,2],lydian:[2,2,2,1,2,2,1],mixolydian:[2,2,1,2,2,1,2],aeolian:[2,1,2,2,1,2,2],locrian:[1,2,2,1,2,2,2]},an={0:0,1:0,2:1,3:1,4:2,5:3,6:3,7:4,8:4,9:5,10:5,11:6},sn=function(e,n){return{1:{0:0,1:2,2:4,3:5,4:7,5:9,6:11},2:{0:1,1:3,2:4,3:6,4:8,5:10,6:11}}[n][e]};Number.prototype.mod=function(e){return(this%e+e)%e};var cn=function(){function e(n,t){Object(Xe.a)(this,e),this.piece=n,this.chords=t}return Object(Ke.a)(e,[{key:"generate",value:function(){for(var e=this.calcSegmentChordData(this.piece.staticScaleAssociation),n=0;n<this.piece.segments.length;n++)this.piece.segments[n].chord=e[n].chord,this.piece.segments[n].diatonicScale=e[n].diatonicScale;return this.piece}},{key:"calcDiatonicScale",value:function(e,n,t){var o=function(){var e=Ye().segments[0].diatonicScale;return e.notes=[],e}(),r=K.b(K.a(e))[0]%12,i=an[r];if(o.cromaticOffset=function(e,n){return{0:{0:1,1:2},1:{2:1,3:2},2:{4:1},3:{5:1,6:2},4:{7:1,8:2},5:{9:1,10:2},6:{11:1}}[e][n]}(i,r),null==n){t.includes("ionian")?o.name="ionian":o.name=K.e(t);var a=on[o.name];o.tonality=(i-a).mod(7)}else{for(var s=sn(n.tonality,n.cromaticOffset),c=[],l=[0,7,2,9,4,11,6,1,8,3,10,5],u=0;u<t.length;u++){var d=on[t[u]];c.push({name:t[u],tonality:(i-d).mod(7),index:null})}for(var h=null,p=0;p<l.length;p++){l[p]===s&&(h=p);for(var m=0;m<c.length;m++){var g=sn(c[m].tonality,o.cromaticOffset);l[p]===g&&(c[m].index=p)}}for(var b=null,f=null,j=0;j<c.length;j++){var x=Math.min((h-c[j].index).mod(12),(c[j].index-h).mod(12));(null==b||x<b)&&(b=x,f=c[j])}o.name=f.name,o.tonality=f.tonality}return o.notes=this.calcDiatonicArray(r,rn[o.name],7),o}},{key:"calcSegmentChordData",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[],t=0;t<this.chords.length;t++){var o=this.chords[t].duration/this.piece.segmentDuration,r=null;n.length>0&&(r=n[n.length-1].diatonicScale);var i=null;i=e?this.calcDiatonicScale(this.chords[t],null,tn[this.chords[t].color]):this.calcDiatonicScale(this.chords[t],r,nn[this.chords[t].color]);for(var a=0;a<o;a++){var s=Ve();s.tonic=this.chords[t].tonic,s.color=this.chords[t].color,s.notes=K.b(K.a(this.chords[t])),n.push({chord:s,diatonicScale:i})}}return n}},{key:"calcDiatonicArray",value:function(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=[e],r=0;r<t;r++)for(var i=0;i<n.length;i++)e+=n[i],o.push(e);return o}}]),e}(),ln=function(){function e(n,t,o){return Object(Xe.a)(this,e),this.motif=o,this.piece=n,this.segment=n.segments[t],this.previousSegment=t>0?n.segments[t-1]:null,this.segmentIndex=t,this.generateTiming(),this.generatePitch(),this.segment}return Object(Ke.a)(e,[{key:"generateTiming",value:function(){for(var e in this.motif.objects)this.segment.objects.push(this.motif.objects[e])}},{key:"generatePitch",value:function(){}}]),e}(),un=function(){function e(n,t,o){return Object(Xe.a)(this,e),this.piece=n,this.motif=o,this.segment=n.segments[t],this.previousSegment=t>0?n.segments[t-1]:null,this.segmentIndex=t,this.generateTiming(),this.generatePitch(),this.segment}return Object(Ke.a)(e,[{key:"generateTiming",value:function(){for(var e=0;e<this.motif.objects.length;e++)this.segment.objects.push(this.motif.objects[this.motif.objects.length-1-e])}},{key:"generatePitch",value:function(){}}]),e}();function dn(e){for(var n=[],t=0;t<e.length;t++)e[t]>=60&&e[t]<72&&n.push(e[t]);return n}function hn(e,n){for(var t=[],o=0;o<e.length;o++)for(var r=0;r<n.length;r++){if(n[r]%12===e[o]%12){t.push(e[o]);break}}return t}function pn(e,n,t){for(var o=0,r=0;r<n.length;r++)o+=n[r];var i=o/n.length,a=[],s=K.c(e,n[n.length-1]);if("0"===t)for(var c=0;c<e.length;c++)e[c]===s&&(c-2>=0&&(a.push(e[c-2]),a.push(e[c-1])),a.push(e[c]),c+2<e.length&&(a.push(e[c+1]),a.push(e[c+2])));else for(var l=0;l<e.length;l++)"+"===t&&e[l]>=i&&a.push(e[l]),"-"===t&&e[l]<=i&&a.push(e[l]);return a}function mn(e,n,t){for(var o=[],r=0;r<e.length;r++){if("+"===t&&e[r]===n){for(var i=0;i<5;i++)r+i<e.length&&o.push(e[r+i]);break}if("-"===t&&e[r]===n){for(var a=r-4;a<=r;a++)a>=0&&o.push(e[a]);break}}return 0===o.length?[K.c(e,n)]:o}function gn(e,n,t){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16,r=[],i=0;i<e.length;i++)e[i]<=n+o&&e[i]>=t-o&&r.push(e[i]);return r}function bn(e,n){for(var t=[],o=0;o<e.length;o++)n.includes(e[o])?t.push(e[o]):t.push(NaN);return t}var fn=function(){function e(n){Object(Xe.a)(this,e),this.segment=n}return Object(Ke.a)(e,[{key:"generate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n={},t=[],o=null,r=null,i=null;for(var a in this.segment.objects)if("pause"!==this.segment.objects[a].type){for(var s=[],c=0;c<this.segment.diatonicScale.notes.length;c++)s.push(this.segment.diatonicScale.notes[c]);if(a%8===0){0===t.length&&(n.topFilteredNotes=s,n.chordNotes=this.segment.chord.notes);for(var l=[],u=0;u<this.segment.chord.notes.length;u++){var d=this.segment.chord.notes[u];l.push(an[d])}s=hn(s,l),0===t.length&&(n.secondFilteredNotes=l)}t.length>0&&(s=pn(s,t,this.segment.directionality),n.melodicContour=bn(this.segment.diatonicScale.notes,s)),t.length>0&&(i=1===t.length&&"0"!==this.segment.directionality?this.segment.directionality:K.e(["+","-"]),n.localRangeDirection=i,s=mn(s,t[t.length-1],i),n.localRange=bn(this.segment.diatonicScale.notes,s)),t.length>0&&(s=gn(s,o,r),n.globalRange=bn(this.segment.diatonicScale.notes,s));var h=null;if(0===t.length){if(n.firstFilteredNotes=s,null==e)s=dn(s);else{var p=e%12,m=7*Math.floor(e/12),g=p+m+28;s=[K.c(s,g)]}o=h=K.e(s),r=h,n.firstNote=h}else if(1===s.length)(h=s[0])<o&&(o=h),h>r&&(r=h);else{for(var b=t[t.length-1],f=null,j=bn(this.segment.diatonicScale.notes,s),x=0;x<j.length;x++)if(j[x]===b){f=x;break}var v=[];if("+"===i)for(var y=0;y<5;y++)v.push(j[f+y]);else if("-"===i)for(var O=0;O<5;O++)v.push(j[f-O]);for(var w=[[v[0],10],[v[1],60],[v[2],15],[v[3],10],[v[4],5]],S=[],k=0,C=0;C<w.length;C++)Number.isNaN(w[C][0])||null!=w[C][0]&&(S.push(w[C]),k+=w[C][1]);for(var M=0;M<S.length;M++)S[M][1]=S[M][1]/k*100;n.probs=S,(h=K.d(S))<o&&(o=h),h>r&&(r=h)}t.push(h),n.diatonicPitches=t,this.segment.objects[a].pitch=h}else delete this.segment.objects[a].pitch;for(var N=0;N<this.segment.objects.length;N++)"pause"!==this.segment.objects[N].type&&(Number.isNaN(this.segment.objects[N].pitch)&&(console.warn("NaN fixed"),delete this.segment.objects[N].pitch,this.segment.objects[N].type="pause"),null==this.segment.objects[N].pitch&&(console.log(this.segment.objects[N]),console.warn("Null fixed"),delete this.segment.objects[N].pitch,this.segment.objects[N].type="pause"));return this.segment}}]),e}(),jn=function(){function e(n,t,o){return Object(Xe.a)(this,e),this.piece=n,this.motif=o,this.segment=n.segments[t],this.previousSegment=t>0?n.segments[t-1]:null,this.segmentIndex=t,this.generateTiming(),this.generatePitch(),this.segment}return Object(Ke.a)(e,[{key:"generateTiming",value:function(){for(var e=0;e<this.motif.objects.length;e++){var n=Qe();n.type=this.motif.objects[e].type,n.duration=this.motif.objects[e].duration,this.segment.objects.push(n)}}},{key:"generatePitch",value:function(){if(null==this.previousSegment)this.segment=new fn(this.segment).generate();else{for(var e=null,n=0;n<this.previousSegment.objects;n++)"pause"!==this.previousSegment.objects[n].type&&(e=this.previousSegment.objects[n].pitch);this.segment=new fn(this.segment).generate(e)}}}]),e}(),xn=function(){function e(n,t,o){return Object(Xe.a)(this,e),this.piece=n,this.motif=o,this.segment=n.segments[t],this.previousSegment=t>0?n.segments[t-1]:null,this.segmentIndex=t,this.generateTiming(),this.generatePitch(),this.segment}return Object(Ke.a)(e,[{key:"generateTiming",value:function(){for(var e=[],n=0;n<this.motif.objects.length;n++)e.push(this.motif.objects[n].duration);for(var t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[o],e[o]=r}for(var i=0;i<this.motif.objects.length;i++){var a=Qe();a.type=this.motif.objects[i].type,a.duration=e[i],this.segment.objects.push(a)}}},{key:"generatePitch",value:function(){for(var e=0;e<this.motif.objects.length;e++)"pause"===this.segment.objects[e].type?delete this.segment.objects[e].pitch:this.segment.objects[e].pitch=this.motif.objects[e].pitch}}]),e}(),vn=function(){function e(n,t){return Object(Xe.a)(this,e),this.piece=n,this.segment=n.segments[t],this.previousSegment=t>0?n.segments[t-1]:null,this.segmentIndex=t,this.generateTiming(),this.generatePitch(),this.segment}return Object(Ke.a)(e,[{key:"generateTiming",value:function(){var e=8*this.piece.segmentDuration,n=.125,t=[];this.piece.segmentDuration>=3&&(t=[20,50,20,10]),2===this.piece.segmentDuration&&(t=[10,40,30,20]),1===this.piece.segmentDuration&&(t=[0,40,50,10]);for(var o=0,r=0;r<e;r++){var i=e-o;if(!(r<o)){var a=0;if(i>=8)o+=(a=K.d([[1,t[0]],[.5,t[1]],[.25,t[2]],[n,t[3]]]))/n;else if(i>=4){var s=t[1]+t[2]+t[3];o+=(a=K.d([[.5,t[1]/s*100],[.25,t[2]/s*100],[n,t[3]/s*100]]))/n}else if(i>=2){var c=t[2]+t[3];o+=(a=K.d([[.25,t[2]/c*100],[n,t[3]/c*100]]))/n}else 1===i&&(o+=(a=n)/n);var l=K.d([["note",100-100*this.piece.pausePresence],["pause",100*this.piece.pausePresence]]),u=Qe();u.type=l,u.duration=a,this.segment.objects.push(u)}}}},{key:"generatePitch",value:function(){if(null==this.previousSegment)this.segment=new fn(this.segment).generate();else{for(var e=null,n=0;n<this.previousSegment.objects.length;n++)"pause"!==this.previousSegment.objects[n].type&&(e=this.previousSegment.objects[n].pitch);this.segment=new fn(this.segment).generate(e)}}}]),e}(),yn=function(){function e(n){Object(Xe.a)(this,e),this.piece=n}return Object(Ke.a)(e,[{key:"applyTransformations",value:function(){for(var e=null,n=0;n<this.piece.segments.length;n++){if(0===n)this.piece.segments[n]=new this.piece.segments[n].transform.method(this.piece,n),e=this.piece.segments[n];else this.piece.segments[n]=new this.piece.segments[n].transform.method(this.piece,n,e),this.piece.segments[n-1].chord.tonic+this.piece.segments[n-1].chord.color!==this.piece.segments[n].chord.tonic+this.piece.segments[n].chord.color&&(e=this.piece.segments[n])}return this.piece}},{key:"lastNoteAdjust",value:function(){for(var e=this.piece.segments.length-1,n=null,t=0;t<this.piece.segments[e].objects.length;t++){"note"===this.piece.segments[e].objects[t].type&&(n=t)}for(var o=this.piece.segments[e].chord.notes,r=[],i=0;i<o.length;i++){var a=o[i];r.push(a)}var s=hn(this.piece.segments[e].diatonicScale.notes,o),c=this.piece.segments[e].objects[n];c?this.piece.segments[e].objects[n].pitch=K.c(s,c.pitch):console.warn("LastObj not found")}},{key:"pickTransformations",value:function(){for(var e=null,n=0;n<this.piece.segments.length;n++)if(0!==n)if(this.piece.segments[n-1].chord.tonic+this.piece.segments[n-1].chord.color===this.piece.segments[n].chord.tonic+this.piece.segments[n].chord.color){var t=[];this.piece.segments[n].directionality===e.directionality&&this.piece.segments[n].chord.tonic+this.piece.segments[n].chord.color===e.chord.tonic+e.chord.color&&this.piece.segments[n-1].transform.method!==ln&&t.push(ln),["0",e.directionality].includes(this.piece.segments[n].directionality)||t.push(un),["+","-","0"].includes(this.piece.segments[n].directionality)&&t.push(jn),[e.directionality].includes(this.piece.segments[n].directionality)&&t.push(xn),["+","-","0"].includes(this.piece.segments[n].directionality)&&t.push(vn),this.piece.segments[n].transform.method=K.e(t),this.piece.segments[n].transform.method===vn&&(e=this.piece.segments[n])}else this.piece.segments[n].transform.method=K.e([vn,jn]),e=this.piece.segments[n];else this.piece.segments[n].transform.method=vn,e=this.piece.segments[n];return this.piece}}]),e}(),On=function(){function e(n){Object(Xe.a)(this,e),this.piece=JSON.parse(JSON.stringify(n))}return Object(Ke.a)(e,[{key:"generate",value:function(){for(var e=0,n=0;n<this.piece.segments.length;n++)for(var t=0;t<this.piece.segments[n].objects.length;t++)this.piece.segments[n].objects[t].onsetTime=e,e+=this.piece.segments[n].objects[t].duration;return this.piece}}]),e}(),wn=function(){function e(){Object(Xe.a)(this,e)}return Object(Ke.a)(e,[{key:"generate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Ze();return o.pausePresence=n,o.staticScaleAssociation=t,o=new $e(o,e).generate(),o=new en(o).generate(),o=new cn(o,e).generate(),o=new yn(o).pickTransformations(),o=new yn(o).applyTransformations(),o=new On(o).generate(),console.log(o),this.export(o)}},{key:"export",value:function(e){for(var n=[],t=0;t<e.segments.length;t++)for(var o=0;o<e.segments[t].objects.length;o++){var r=e.segments[t].objects[o];n.push(r)}return n}}]),e}(),Sn=t(105);t(299);Sn.a.initializeApp({apiKey:"AIzaSyA_oN8KNoH7IRTTDTbTCV_HdjX7kCCUdCE",authDomain:"fa-no-92f77.firebaseapp.com",projectId:"fa-no-92f77",storageBucket:"fa-no-92f77.appspot.com",messagingSenderId:"126141384109",appId:"1:126141384109:web:37d1f53610cb8522cc0d24",measurementId:"G-T50C9WGFYZ"});var kn,Cn,Mn,Nn,Dn,Pn,Tn,En,An,In,zn,Fn,Un,Ln,Bn,Hn,qn,Rn=Sn.a,Gn=t(151),Jn=L.d.div(kn||(kn=Object(B.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    min-height: 90px;\n    width: fit-content;\n    background: ",";\n    box-shadow: 0 8px 32px 0 rgba(75, 75, 75, 0.37);\n    margin: 20px;\n    font-size: 1.1em;\n    border-radius: 15px;\n    border: ",";\n    padding: 5px;\n"])),(function(e){return e.theme.panelColor}),(function(e){return e.theme.border})),Wn=L.d.button(Cn||(Cn=Object(B.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: 0.2s;\n    min-width: 100px;\n    height: 55px;\n    border: ",";\n    border-radius: 15px;\n    font-size: 1.1em;\n    background: ",";\n\n    margin: 5px;\n    cursor: pointer;\n    overflow: hidden;\n    transition: 0.5s;\n    &:hover {\n        background: rgba(255, 255, 255, 0.9);\n    }\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.buttonColor})),Xn=function(e){return Object(Y.jsxs)(Jn,{className:e.className,children:[e.title,Object(Y.jsx)("div",{style:{display:"flex",flexDirection:"center",alignItems:"center"},children:e.buttons.map((function(n,t){return Object(Y.jsx)(Wn,{onClick:function(){e.buttonPressed(n)},style:{background:e.mode===n?e.color.hex:null},children:n},t)}))})]})},Kn=L.d.div(Mn||(Mn=Object(B.a)(["\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    overflow: hidden;\n"]))),Yn=Object(L.d)(Gn.a)(Nn||(Nn=Object(B.a)(["\n    display: flex;\n\n    align-self: center;\n    margin: 25px;\n\n    cursor: pointer;\n"]))),Zn=L.d.div(Dn||(Dn=Object(B.a)(["\n    width: 25px;\n    height: 25px;\n    transform: translate(-50%, -7px);\n    border-radius: 50%;\n    background: ",";\n"])),(function(e){return e.theme.buttonColor})),_n=function(e){var n=function(){e.toggleMenu(2),e.updateServer()};return e.showMenu?Object(Y.jsxs)("div",{className:"Container",children:[Object(Y.jsx)(xe,{onClick:n}),Object(Y.jsxs)(ke,{className:"StyleMenu",children:[Object(Y.jsx)(we,{titleMenu:"Style Lab",toggleMenu:n}),Object(Y.jsx)("p",{children:"\ud83c\udfa8 Select the accent color of the application"}),Object(Y.jsx)(Kn,{children:Object(Y.jsx)(Yn,{height:10,pointer:Zn,color:e.color,onChangeComplete:function(n){e.setColor(n)}})}),Object(Y.jsx)("p",{children:"\ud83c\udfb9 Select the sound of the chord instrument and the melodic instrument"}),Object(Y.jsx)(Kn,{children:Object(Y.jsxs)("div",{style:{display:"flex",flexDirection:"center",alignItems:"center"},children:[Object(Y.jsx)(Xn,{title:"Chords",color:e.color,mode:e.parameters.chordSound,buttons:e.chordSounds,buttonPressed:function(n){e.changeChordSound(n)}}),Object(Y.jsx)(Xn,{title:"Melody",color:e.color,mode:e.parameters.melodySound,buttons:e.melodySounds,buttonPressed:function(n){e.changeMelodySound(n)}})]})})]})]}):null},Qn=L.d.form(Pn||(Pn=Object(B.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    width: fit-content;\n    height: fit-content;\n\n    margin-top: 10px;\n    margin-bottom: 25px;\n"]))),Vn=L.d.button(Tn||(Tn=Object(B.a)(["\n    display: flex;\n    align-self: flex-end;\n    align-items: center;\n    transition: 0.2s;\n    height: 30px;\n    width: fit-content;\n    border: ",";\n    border-radius: 15px;\n    font-size: 1em;\n    background: rgba(100, 255, 100, 0.9); /*",";*/\n\n    padding: 6px;\n\n    margin-left: 10px;\n\n    cursor: pointer;\n\n    transition: 0.5s;\n    &:hover {\n        background: rgba(100, 255, 100, 0.9);\n    }\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.buttonColor})),$n=L.d.button(En||(En=Object(B.a)(["\n    display: flex;\n    align-self: flex-end;\n    align-items: center;\n    transition: 0.2s;\n    height: 30px;\n    width: fit-content;\n    border: ",";\n    border-radius: 15px;\n    font-size: 1em;\n    background: ",";\n\n    padding: 6px;\n\n    margin-left: 10px;\n\n    cursor: pointer;\n\n    transition: 0.5s;\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.buttonColor})),et=function(e){return Object(Y.jsxs)(Qn,{id:"test",onSubmit:e.onSubmit,children:[Object(Y.jsx)("input",{name:"song",type:"text",placeholder:"nice title...",value:e.value,onChange:e.onChange}),Object(Y.jsx)(Vn,{type:"submit",children:"Select"}),Object(Y.jsx)($n,{type:"submit",onSubmit:e.onSubmit,onClick:e.onDelete,style:{color:e.allSongs.indexOf(e.value)<0?"rgb(100, 100, 100)":"rgb(0, 0, 0)",background:e.allSongs.indexOf(e.value)<0?"rgb(150, 150, 150)":"rgb(255, 100, 100, 0.8)",pointerEvents:e.allSongs.indexOf(e.value)<0?"none":null},children:"Delete"})]})},nt=L.d.div(An||(An=Object(B.a)(["\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    align-items: center;\n"]))),tt=L.d.div(In||(In=Object(B.a)(["\n    display: flex;\n    width: fit-content;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    overflow: auto;\n    margin-top: 10px;\n"]))),ot=L.d.div(zn||(zn=Object(B.a)(["\n    display: flex;\n    width: fit-content;\n    height: fit-content;\n    flex-wrap: wrap;\n\n    background: ",";\n\n    border-radius: 10px;\n\n    border: ",";\n\n    margin-right: 10px;\n    margin-bottom: 5px;\n    margin-top: 5px;\n    cursor: pointer;\n    padding: 5px;\n    &:hover {\n        background: rgba(255, 255, 255, 0.9);\n    }\n"])),(function(e){return e.theme.buttonColor}),(function(e){return e.theme.border})),rt=function(e){var n=Object(N.useState)(""),t=Object(U.a)(n,2),o=t[0],r=t[1],i=function(){e.toggleMenu(0),r("")};return e.showMenu?Object(Y.jsxs)("div",{className:"Container",children:[Object(Y.jsx)(xe,{onClick:i}),Object(Y.jsxs)(ke,{className:"SongTitleMenu",children:[Object(Y.jsx)(we,{titleMenu:"Song Selection",toggleMenu:i}),Object(Y.jsx)("p",{children:"\u270d\ud83c\udffc Enter the name of the song you want to modify or create a new one"}),Object(Y.jsx)(nt,{children:Object(Y.jsx)("div",{style:{display:"flex",flexDirection:"center",alignItems:"center"},children:Object(Y.jsx)(et,{onSubmit:e.onSubmit,onChange:function(e){return r(e.target.value)},value:o,allSongs:e.allSongs,onDelete:function(){e.onDelete(o),r("")}})})}),Object(Y.jsx)("p",{children:"\ud83e\uddfe List of all the available songs"}),Object(Y.jsx)(nt,{children:Object(Y.jsx)("div",{style:{display:"flex",flexDirection:"center",alignItems:"center"},children:Object(Y.jsx)(tt,{children:e.allSongs.filter((function(e){return"default"!==e})).map((function(n,t){return Object(Y.jsx)(ot,{onClick:function(e){r(e.target.innerText)},style:{background:e.songName===n?e.color.hex:null,borderColor:o===n?e.color.hex:null},children:n},t)}))})})})]})]}):null},it=L.d.div(Fn||(Fn=Object(B.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: fit-content;\n    width: fit-content;\n    background: ",";\n    box-shadow: 0 8px 32px 0 rgba(75, 75, 75, 0.37);\n    margin: 25px;\n\n    border-radius: 15px;\n    border: ",";\n    padding: 5px;\n"])),(function(e){return e.theme.panelColor}),(function(e){return e.theme.border})),at=L.d.input(Un||(Un=Object(B.a)(["\n    -webkit-appearance: none;\n    width: 300px;\n    height: 20px;\n\n    background: ",";\n    border: ",";\n    -webkit-transition: 0.2s;\n    transition: opacity 0.2s;\n    margin: 5px;\n\n    &::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        appearance: none;\n        width: 25px;\n        height: 25px;\n        border-radius: 50%;\n        background: rgb(100, 100, 100);\n        cursor: pointer;\n    }\n"])),(function(e){return e.theme.panelColor}),(function(e){return e.theme.border})),st=function(e){return Object(Y.jsxs)(it,{className:e.className,children:[Object(Y.jsx)("p",{children:e.title}),Object(Y.jsx)(at,{type:"range",min:e.min,max:e.max,step:e.step,value:e.value,onChange:function(n){e.onSlide(n.target.value)}}),Object(Y.jsx)("p",{children:e.value})]})},ct=L.d.div(Ln||(Ln=Object(B.a)(["\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    align-items: center;\n"]))),lt=(L.d.div(Bn||(Bn=Object(B.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: 0.2s;\n\n    height: 80px;\n    border: ",";\n    border-radius: 15px;\n    font-size: 1.2em;\n    background: ",";\n    padding: 5px;\n    margin-top: 20px;\n    cursor: pointer;\n    overflow: hidden;\n    transition: 0.5s;\n    &:hover {\n        background: rgba(255, 255, 255, 0.9);\n    }\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.buttonColor})),function(e){var n=function(){e.toggleMenu(3),e.updateServer()};return e.showMenu?Object(Y.jsxs)("div",{className:"Container",children:[Object(Y.jsx)(xe,{onClick:n}),Object(Y.jsxs)(ke,{className:"MelodyMenu",children:[Object(Y.jsx)(we,{titleMenu:"Parameters Lab",toggleMenu:n}),Object(Y.jsx)("p",{children:"\u23f2 Select the BPM of the generated melody"}),Object(Y.jsx)(ct,{children:Object(Y.jsx)(st,{color:e.color,title:"BPM",min:40,max:200,value:e.parameters.tempo,onSlide:function(n){e.changeTempo(n)}})}),Object(Y.jsx)("p",{children:"\ud83c\udfbc Select the balance between notes and pauses"}),Object(Y.jsx)(ct,{children:Object(Y.jsx)(st,{color:e.color,title:"Pauses \u2194 Notes",min:0,max:1,step:.01,value:e.parameters.notePause,onSlide:function(n){e.changeNotePause(n)}})}),Object(Y.jsx)("p",{children:"\ud83e\udd2f Select the level of complexity"}),Object(Y.jsx)(ct,{children:Object(Y.jsx)(Xn,{color:e.color,mode:e.parameters.complexityMode,buttons:e.complexityModes,buttonPressed:function(n){e.changeComplexity(n)}})})]})]}):null}),ut=L.d.div(Hn||(Hn=Object(B.a)(["\n    font-size: 1.3em;\n    color: white;\n"]))),dt=(L.d.div(qn||(qn=Object(B.a)(["\n    display: flex;\n\n    align-items: center;\n\n    font-size: 1.5em;\n    width: 50px;\n    height: 50px;\n    color: white;\n"]))),function(e){return e.showMenu?Object(Y.jsx)("div",{className:"Container",onClick:function(){e.toggleMenu(4)},children:Object(Y.jsxs)(ut,{children:[Object(Y.jsx)("h1",{style:{marginBottom:"10px"},children:"Hello traveller, welcome to Falling Notes! \ud83c\udf20"}),Object(Y.jsx)("p",{children:"\xa0\xa0"}),Object(Y.jsx)("h4",{children:"INSTRUCTIONS:"}),Object(Y.jsx)("p",{children:'1. Open the "Song Selection" menu to create a song or to select it from the existing list '}),Object(Y.jsx)("p",{children:'2. Open the "Chord Lab" menu to write the chord progression of your song'}),Object(Y.jsx)("p",{children:"3. Click on the dice to generate a random melody. Every time you press this button, the old melody will be overwritten!"}),Object(Y.jsx)("p",{children:"4. Press the Play button and enjoy your creation! "}),Object(Y.jsx)("p",{children:"\xa0\xa0"}),Object(Y.jsx)("h4",{children:"CUSTOMIZATION:"}),Object(Y.jsx)("p",{children:'The "Style Lab" menu allows you to choose the color accent and the instruments of your song'}),Object(Y.jsx)("p",{children:'The "Parameters Lab" menu allows you to choose the tempo of the song and tune the melody generator parameters'}),Object(Y.jsx)("p",{children:"\xa0\xa0"}),Object(Y.jsx)("h4",{children:"REMEMBER:"}),Object(Y.jsx)("p",{children:"If you really like the melody, you can download the MIDI file using the Download button!"}),Object(Y.jsx)("p",{children:"\xa0\xa0"}),Object(Y.jsx)("p",{className:"pulsate",children:"Click anywhere to continue..."})]})}):null}),ht=t(103);var pt=function(){var e=Object(N.useState)([!1,!1,!1,!1,!0]),n=Object(U.a)(e,2),t=n[0],o=n[1],r=Object(N.useState)("default"),i=Object(U.a)(r,2),a=i[0],s=i[1],c=Object(N.useState)([]),l=Object(U.a)(c,2),u=l[0],d=l[1],h=Object(N.useState)([]),p=Object(U.a)(h,2),m=p[0],g=p[1],b=Object(N.useState)([]),f=Object(U.a)(b,2),j=f[0],x=f[1],v=Object(N.useState)(!1),y=Object(U.a)(v,2),O=y[0],w=y[1],S=["Classical","Pro Jazz"],k=["Bells","Synth"],C=["Pad","Piano"],M=Object(N.useState)({tempo:120,notePause:.5,complexityMode:S[0],melodySound:k[0],chordSound:C[0],color:{hsl:{h:0,s:1,l:.5,a:1},hex:"#FF0000"}}),D=Object(U.a)(M,2),P=D[0],T=D[1];Object(N.useEffect)((function(){J(),R("default")}),[]);var E=function(e){var n=[!1,!1,!1,!1,!1],r=!t[e];n[e]=r,o(n)},B=Rn.firestore().collection("songs"),q=Rn.firestore().collection("parameters"),R=function(e){console.log("Aceess to db get song"),B.doc(e).get().then((function(n){if(n.exists){var t=n.data();if(t){var o=[];for(var r in t)o=[].concat(Object(F.a)(o),[t[r]]);g(o),x([])}}else{g([]),x([]),G(e);var i=[].concat(Object(F.a)(u),[e]);d(i)}})).catch((function(e){console.log("Error getting document:",e)})),q.doc(e).get().then((function(n){if(n.exists){var t=n.data();t&&T({tempo:t.tempo,notePause:t.notePause,complexityMode:t.complexityMode,melodySound:t.melodySound,chordSound:t.chordSound,color:t.color})}else T({tempo:120,notePause:.5,complexityMode:S[0],melodySound:k[0],chordSound:C[0],color:{hsl:{h:0,s:1,l:.5,a:1},hex:"#FF0000"}}),G(e)})).catch((function(e){console.log("Error getting document:",e)}))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;console.log("Aceess to db update");var n=Object(z.a)({},m);B.doc(e).delete(),B.doc(e).set(n);var t=Object(z.a)({},P);q.doc(e).delete(),q.doc(e).set(t)},J=function(){var e=Object(I.a)(A.a.mark((function e(){var n,t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Aceess to db get all"),e.next=3,Rn.firestore().collection("songs").get();case 3:n=e.sent,t=n.docs.map((function(e){return e.id})),d(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.u();case 2:if(!O){e.next=7;break}return w(!1),e.next=6,Me.o.stop();case 6:return e.abrupt("return");case 7:return console.log("play..."),w(!0),e.next=11,Me.o.start();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=5;break}return w(!1),e.next=4,Me.o.stop();case 4:case 5:return e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Y.jsx)("div",{className:"app",children:Object(Y.jsxs)(L.a,{theme:We.dark,children:[Object(Y.jsx)(H,{}),Object(Y.jsx)(ht.default,{chords:m,melody:j,isPlaying:O,parameters:P}),Object(Y.jsx)(Je,{melody:j,chords:m,color:P.color.hsl.h,isPlaying:O}),Object(Y.jsxs)("p",{className:"Info",style:{color:"white",position:"fixed",bottom:"25px",right:"25px",zIndex:"100"},children:["Song: ",a]}),Object(Y.jsx)($,{toggleMenu:E,melody:j,chords:m,tempo:P.tempo,songName:a,isPlaying:O,startStopContext:X,stopContext:K,computeMelody:function(){var e=[];m.forEach((function(n){var t={tonic:n.tonic,color:n.quality,duration:parseInt(n.duration)};e=[].concat(Object(F.a)(e),[t])}));var n=!1,t=Math.abs(1-P.notePause);if("Classical"===P.complexityMode&&(n=!0),e.length>0){var o=(new wn).generate(e,t,n);x(o)}}}),Object(Y.jsx)(dt,{toggleMenu:E,showMenu:t[4]}),Object(Y.jsx)(W.f,{style:{color:"white",fontSize:"2.5em",position:"fixed",top:"15px",right:"15px",cursor:"pointer"},onClick:function(){return E(4)}}),Object(Y.jsx)(rt,{songName:a,color:P.color,showMenu:t[0],toggleMenu:E,onSubmit:function(e){!function(e){e.preventDefault();var n=""!==e.target.elements.song.value?e.target.elements.song.value:"default";s(n),R(n)}(e)},onDelete:function(e){console.log("Aceess to db delete");var n=u.filter((function(n){return n!==e}));d(n),B.doc(e).delete(),q.doc(e).delete()},allSongs:u,stopContext:K}),Object(Y.jsx)(Ce,{showMenu:t[1],toggleMenu:E,chords:m,updateChords:g,updateServer:G,stopContext:K}),Object(Y.jsx)(_n,{showMenu:t[2],toggleMenu:E,color:P.color,setColor:function(e){T(Object(z.a)(Object(z.a)({},P),{},{color:{hsl:e.hsl,hex:e.hex}}))},parameters:P,changeChordSound:function(e){return T(Object(z.a)(Object(z.a)({},P),{},{chordSound:e}))},changeMelodySound:function(e){return T(Object(z.a)(Object(z.a)({},P),{},{melodySound:e}))},melodySounds:k,chordSounds:C,updateServer:G,stopContext:K}),Object(Y.jsx)(lt,{showMenu:t[3],toggleMenu:E,parameters:P,color:P.color,changeTempo:function(e){return T(Object(z.a)(Object(z.a)({},P),{},{tempo:e}))},changeNotePause:function(e){return T(Object(z.a)(Object(z.a)({},P),{},{notePause:e}))},changeComplexity:function(e){return T(Object(z.a)(Object(z.a)({},P),{},{complexityMode:e}))},complexityModes:S,updateServer:G,stopContext:K})]})})},mt=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,324)).then((function(n){var t=n.getCLS,o=n.getFID,r=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),o(e),r(e),i(e),a(e)}))};T.a.render(Object(Y.jsx)(D.a.StrictMode,{children:Object(Y.jsx)(pt,{})}),document.getElementById("root")),mt()}},[[298,1,2]]]);
//# sourceMappingURL=main.9d4f8e3e.chunk.js.map